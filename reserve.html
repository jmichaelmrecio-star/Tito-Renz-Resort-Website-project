<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<link rel="stylesheet" href="style.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>

	<header>
        <nav>
            <h1><a href="index.html" style="color: white; text-decoration: none;">Tito Renz Resort </a></h1>
            <ul>
                </ul>
        </nav>
    </header>
	<main>
	    <section id="reservation-form-area">
	        <h2>Complete Your Reservation</h2>
	        <form id="reservationForm">

	        	<fieldset>
				    <legend>1. Selected Service</legend>
				    <p>You have selected: <span id="selectedServiceDisplay" style="font-weight: bold; color: #dc3545;">(No Service Selected)</span></p>
			    </fieldset>

	            <fieldset>
	                <legend>2. Reservation Details</legend>

	                <label for="guests">Number of Guests:</label>
	                <input type="number" id="guests" name="number_of_guests" min="1" required>

	                <label for="checkin">Check-in Date & Time:</label>
	                <input type="datetime-local" id="checkin" name="checkin_date" required>

	                <label for="checkout">Check-out Date & Time:</label>
	                <input type="datetime-local" id="checkout" name="checkout_date" required>
	            </fieldset>

	            <div id="payment-summary">
				    <h3>Order Summary</h3>
				    <p>Service Name: <span id="summaryServiceName"></span></p>
				    <p>Base Price: <span id="summaryBasePrice"></span></p>
				    
				    <hr>
				    
				    <div class="form-group" style="margin-top: 15px;">
				        <label for="promoCodeInput">Have a Discount Code?</label>
				        <div style="display: flex; gap: 10px;">
				            <input type="text" id="promoCodeInput" placeholder="Enter Code" style="flex-grow: 1;">
				            <button type="button" id="applyPromoButton" class="button-secondary">Apply</button>
				        </div>
				        <p id="promoMessage" style="margin-top: 5px; font-size: 0.9em;"></p>
				    </div>
				    
				    <hr>
				    
				    <p style="color: green; font-weight: bold;">Discount Applied: <span id="discountAmount">P0.00</span></p>
				    
				    <p style="font-size: 1.2em; font-weight: bold;">TOTAL DUE: <span id="finalTotal"></span></p>
				</div>
				<br>

				<fieldset>
				    <legend>4. Terms and Conditions</legend>
				    <div style="max-height: 150px; overflow-y: scroll; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; font-size: 0.9em;">
				        <p style="font-weight: bold;">Tito Renz Resort Reservation Policy Highlights:</p>
				        <ol>
				            <li>**Deposit:** A non-refundable 50% deposit is required to confirm the reservation. The remainder is due upon check-in.</li>
				            <li>**Cancellation:** Cancellations made 7 days prior to check-in will receive a full refund of the remaining balance (deposit is non-refundable).</li>
				            <li>**Check-in/Out:** Standard check-in is 2:00 PM and check-out is 12:00 PM. Late check-out may incur additional fees.</li>
				            <li>**Liability:** The resort is not responsible for any loss, damage, or injury to persons or property during the stay.</li>
				            <li>**House Rules:** Guests must strictly follow all posted resort house rules (e.g., no loud noise after 10 PM, swimming pool guidelines). Failure to comply may result in removal without refund.</li>
				        </ol>
				        <p style="margin-top: 10px; color: #dc3545; font-weight: bold;">*The full, comprehensive Terms and Conditions are available upon request.*</p>
				    </div>

				    <div style="display: flex; align-items: center; gap: 8px; margin-top: 15px;">
				        <input type="checkbox" id="termsCheck" name="terms_agreed" required style="width: auto;">
				        <label for="termsCheck" style="font-weight: bold; margin: 0;">I have read and agree to the <a href="#" onclick="alert('Full Terms and Conditions would open here.'); return false;">Terms and Conditions</a>.</label>
				    </div>
				</fieldset>
				<br>

	            <fieldset>
	                <legend>3. Payment & Confirmation</legend>
	                <p>Please simulate **Upload Payment Proof** by acknowledging the payment step.</p>
	                <label for="paymentRef">GCash Reference Number (Optional for Demo):</label>
	                <input type="text" id="paymentRef" name="payment_ref">
	            </fieldset>

	            <button type="submit" class="button-primary">Confirm & Submit Reservation</button>
	        </form>
	    </section>
	</main>
	<footer>
        <div class="footer-content">
            <div class="footer-section contact-info">
                <h3>Tito Renz Resort</h3>
                <p>Your seamless booking experience starts here.</p>
                <p>üìç Norzagaray, Bulacan, Philippines</p>
                <p>üìû 0977 246 8920 or 0916 640 3411</p>
                <p>üìß titorenznorzagaray@gmail.com</p>
            </div>

            <div class="footer-section quick-links">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="services-list.html">Reserve Now</a></li>
                    <li><a href="checkin-demo.html">Check-in Demo</a></li>
                    <li><a href="admin-dashboard.html">Admin Dashboard</a></li>
                </ul>
            </div>

            <div class="footer-section about-contact">
                <h3>About & Contact</h3>
                <ul>
                    <li><a href="about.html">Our Story</a></li>
                    <li><a href="contact.html">Send Us a Message</a></li>
                    <li><a href="help.html">Help / Guides</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 QReserve Project - All Rights Reserved.</p>
        </div>
    </footer>
	<script src="script.js"></script>
	<script>
	    document.addEventListener('DOMContentLoaded', () => {
	        const urlParams = new URLSearchParams(window.location.search);
	        const serviceId = urlParams.get('service');
	        const selectedDisplay = document.getElementById('selectedServiceDisplay');
	        const amountDisplay = document.getElementById('amountDisplay'); // <-- NEW
	        
	        // NOTE: This relies on the global resortServices array from script.js
	        const selectedService = resortServices.find(s => s.id === serviceId);

	        if (selectedService) {
	            // 1. Update the Selected Service Display
	            selectedDisplay.textContent = `${selectedService.name} (P${selectedService.price.toLocaleString('en-US', { minimumFractionDigits: 2 })})`;
	            
	            // 2. Update the Total Amount Due Display (The fix you requested!)
	            amountDisplay.textContent = `P${selectedService.price.toLocaleString('en-US', { minimumFractionDigits: 2 })}`;

	            // 3. Add hidden fields to form for submission
	            const form = document.getElementById('reservationForm');
	            if (form) {
	                // Hidden input for Service Name
	                let hiddenInput = document.createElement('input');
	                hiddenInput.type = 'hidden';
	                hiddenInput.name = 'serviceType';
	                hiddenInput.value = selectedService.name;
	                form.appendChild(hiddenInput);

	                // Hidden input for Price (CRITICAL for DFD 5.0 processing)
	                let priceInput = document.createElement('input');
	                priceInput.type = 'hidden';
	                priceInput.name = 'total_price';
	                priceInput.value = selectedService.price;
	                form.appendChild(priceInput);
	            }
	        } else {
	            selectedDisplay.textContent = 'Please return to the selection page to choose a service.';
	            amountDisplay.textContent = 'N/A';
	        }
	    });
	</script><script src="script.js"></script>
	<script>
			document.addEventListener('DOMContentLoaded', () => {
				 const urlParams = new URLSearchParams(window.location.search);
				 const serviceId = urlParams.get('service');
				 const selectedDisplay = document.getElementById('selectedServiceDisplay');
				 const amountDisplay = document.getElementById('amountDisplay'); 

		     // --- NEW: References for Date/Guest inputs ---
		     const checkinInput = document.getElementById('checkin');
             const checkoutInput = document.getElementById('checkout');
             const guestsInput = document.getElementById('guests');

		     // --- NEW: Read Date/Guest info from URL ---
		     const checkinUrl = urlParams.get('checkin');
		     const checkoutUrl = urlParams.get('checkout');
		     const guestsUrl = urlParams.get('guests');

		     if (checkinUrl && checkoutUrl) {
		            // Pre-fill the date and guest fields using URL data
		            // We assume a 2 PM check-in and 12 PM check-out as defaults
		            checkinInput.value = checkinUrl + 'T14:00'; 
		            checkoutInput.value = checkoutUrl + 'T12:00';
		            guestsInput.value = guestsUrl;

		            // Make fields read-only as the date/guest selection was already made (and validated for blocks)
		            checkinInput.readOnly = true;
		            checkoutInput.readOnly = true;
		            guestsInput.readOnly = true;

		            // UX: Add a visual cue that these fields are pre-filled
		            checkinInput.style.backgroundColor = '#f0f0f0';
		            checkoutInput.style.backgroundColor = '#f0f0f0';
		            guestsInput.style.backgroundColor = '#f0f0f0';
		        }
		        // --- END NEW LOGIC ---

		 // NOTE: This relies on the global resortServices array from script.js
		 const selectedService = resortServices.find(s => s.id === serviceId);

		 if (selectedService) {
			 // 1. Update the Selected Service Display
			 selectedDisplay.textContent = `${selectedService.name} (P${selectedService.price.toLocaleString('en-US', { minimumFractionDigits: 2 })})`;

			 // 2. Update the Total Amount Due Display 
			 amountDisplay.textContent = `P${selectedService.price.toLocaleString('en-US', { minimumFractionDigits: 2 })
			}`;

			 // 3. Add hidden fields to form for submission
			 const form = document.getElementById('reservationForm');
			 if (form) {
				 // Hidden input for Service Name
				 let hiddenInput = document.createElement('input');
				 hiddenInput.type = 'hidden';
				 hiddenInput.name = 'serviceType';
				 hiddenInput.value = selectedService.name;
				 form.appendChild(hiddenInput);

				 // Hidden input for Price (CRITICAL for DFD 5.0 processing)
				 let priceInput = document.createElement('input');
				 priceInput.type = 'hidden';
				 priceInput.name = 'total_price';
				 priceInput.value = selectedService.price;
				 form.appendChild(priceInput);
			 	}
			 } else {
			 selectedDisplay.textContent = 'Please return to the selection page to choose a service.';
			 amountDisplay.textContent = 'N/A';
				}
		});
	</script>
</body>
</html>